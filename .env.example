# ============================================
# Paper Bloom Backend - Environment Variables
# ============================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control!

# ============================================
# DATABASE CONFIGURATION (REQUIRED)
# ============================================
# PostgreSQL connection string
# Format: postgres://username:password@host:port/database_name
# Note: Special characters in password must be URL-encoded
# Example: @ becomes %40, # becomes %23, % becomes %25
DATABASE_URL=postgres://username:password@host:port/database_name

# ============================================
# STRIPE CONFIGURATION (REQUIRED)
# ============================================
# Get your keys from: https://dashboard.stripe.com/test/apikeys
# Use TEST keys (sk_test_...) for development
# Use LIVE keys (sk_live_...) for production

# Stripe Secret Key - Used for server-side API calls
# REQUIRED: Must start with sk_test_ (development) or sk_live_ (production)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe Webhook Secret - Used to verify webhook signatures
# REQUIRED: Get this from Stripe CLI or Dashboard webhook settings
# Format: whsec_...
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Publishable Key - Used for client-side checkout
# REQUIRED: Must start with pk_test_ (development) or pk_live_ (production)
# This is safe to expose in the browser
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key

# ============================================
# APPLICATION CONFIGURATION (REQUIRED)
# ============================================
# Base URL of your application
# REQUIRED: Used for generating QR codes and redirect URLs
# Development: http://localhost:3000
# Production: https://yourdomain.com
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# ============================================
# DATABASE CONNECTION POOL (OPTIONAL)
# ============================================
# Maximum number of clients in the connection pool
# Default: 20
# Recommended: 10-20 for development, 20-50 for production
DB_POOL_MAX=20

# Idle timeout in milliseconds before closing unused connections
# Default: 30000 (30 seconds)
DB_POOL_IDLE_TIMEOUT=30000

# Connection timeout in milliseconds
# Default: 2000 (2 seconds)
DB_POOL_CONNECTION_TIMEOUT=2000

# ============================================
# ENVIRONMENT (OPTIONAL)
# ============================================
# Application environment
# Values: development | production | test
# Default: development
NODE_ENV=development

# ============================================
# LOGGING (OPTIONAL)
# ============================================
# Log level for application logs
# Values: error | warn | info | debug
# Default: info
LOG_LEVEL=info

# ============================================
# CLOUDFLARE R2 STORAGE (REQUIRED)
# ============================================
# Cloudflare R2 configuration for image storage
# Get these from: https://dash.cloudflare.com > R2 > Manage R2 API Tokens

# R2 Account ID - Found in R2 dashboard
R2_ACCOUNT_ID=your_account_id

# R2 Access Key ID - From API token creation
R2_ACCESS_KEY_ID=your_access_key_id

# R2 Secret Access Key - From API token creation (keep secret!)
R2_SECRET_ACCESS_KEY=your_secret_access_key

# R2 Bucket Name - The name of your R2 bucket
R2_BUCKET_NAME=your_bucket_name

# R2 Endpoint - S3-compatible endpoint URL
# Format: https://<account_id>.r2.cloudflarestorage.com
R2_ENDPOINT=https://your_account_id.r2.cloudflarestorage.com

# R2 Public URL - Public URL for accessing images
# Format: https://<bucket_name>.<account_id>.r2.cloudflarestorage.com
# Or use custom domain if configured
R2_PUBLIC_URL=https://your_bucket_name.your_account_id.r2.cloudflarestorage.com

# ============================================
# FILE UPLOAD (OPTIONAL)
# ============================================
# Maximum image upload size in bytes
# Default: 10485760 (10MB)
MAX_IMAGE_SIZE=10485760

# Maximum image dimensions for resizing
# Default: 1920x1080
MAX_IMAGE_WIDTH=1920
MAX_IMAGE_HEIGHT=1080

# ============================================
# SECURITY (OPTIONAL)
# ============================================
# Enable CORS for specific origins (comma-separated)
# Default: * (all origins in development)
# Production: Set to your frontend domain
ALLOWED_ORIGINS=*

# ============================================
# RESEND EMAIL SERVICE (REQUIRED)
# ============================================
# Resend API configuration for transactional emails
# Get your API key from: https://resend.com/api-keys

# Resend API Key - Used for sending emails
# REQUIRED: Get this from Resend dashboard
RESEND_API_KEY=re_your_resend_api_key

# Sender Email Address - Must be verified in Resend
# REQUIRED: Use a verified domain email
# Format: noreply@yourdomain.com
RESEND_FROM_EMAIL=noreply@paperbloom.com

# Sender Name - Displayed as the email sender
# REQUIRED: Friendly name for email sender
RESEND_FROM_NAME=Paper Bloom

# ============================================
# NOTES
# ============================================
# 1. All NEXT_PUBLIC_* variables are exposed to the browser
# 2. Never expose secret keys (STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET) to the browser
# 3. Use URL encoding for special characters in DATABASE_URL
# 4. Test your Stripe integration with test keys before going live
# 5. Set up Stripe webhooks in the dashboard for production
